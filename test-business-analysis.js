/**
 * ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆãƒ†ã‚¹ãƒˆ
 * ç”Ÿæˆã•ã‚ŒãŸå°èª¬ã®ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’è©•ä¾¡
 */

const fs = require('fs');
const path = require('path');
const { BusinessKnowledgeAnalyzer } = require('./business-knowledge-analysis.js');

// ç”Ÿæˆã•ã‚ŒãŸç« ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆå…ˆã»ã©ã®ç”Ÿæˆçµæœï¼‰
const generatedChapters = [
    {
        chapterNumber: 1,
        title: "ç¬¬1ç« ã€€ç†æƒ³ã®ç¯ç«ã€ç¾å®Ÿã®å†·ãŸã•",
        content: `é«˜æ©‹èª ã¯ã€åˆ†åšã„è³‡æ–™ã®å±±ã«å›²ã¾ã‚Œã€æ¯ã‚’å‘‘ã‚€ã‚ˆã†ã«æ·±å‘¼å¸ã‚’ã—ãŸã€‚ã¾ã è‚Œå¯’ã„3æœˆã®æœã€éƒ½å†…ã®å¤§å­¦ã®ç ”ç©¶å®¤ã¯ã€å½¼ã®ç†±æ„ã¨ã¯è£è…¹ã«é™ã¾ã‚Šè¿”ã£ã¦ã„ã‚‹ã€‚ãƒ“ã‚¸ãƒã‚¹ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã€å½¼ã¯ã¾ã‚‹ã§åµã®ä¸­ã«æ”¾ã‚Šå‡ºã•ã‚ŒãŸã‚ˆã†ãªæ„Ÿè¦šã‚’å‘³ã‚ã£ã¦ã„ãŸã€‚

ã€Œé«˜æ©‹å›ã€å›ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ç´ æ™´ã‚‰ã—ã„ã€‚ç¤¾ä¼šèª²é¡Œã¸ã®æ„è­˜ã‚‚é«˜ã„ã€‚ã—ã‹ã—ã€ç¾å®Ÿçš„ã§ã¯ãªã„ã­ã€

å¯©æŸ»å“¡ã®å†·ãŸã„è¨€è‘‰ãŒã€ã¾ã‚‹ã§æ°·ã®ã‚ˆã†ã«å½¼ã®å¿ƒè‡“ã‚’ç· ã‚ä»˜ã‘ã‚‹ã€‚æ–°å’ã®æ—©æœŸé›¢è·å•é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ææ¡ˆã—ãŸå½¼ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ç†æƒ³è«–ã ã¨ä¸€è¹´ã•ã‚ŒãŸã®ã ã€‚

ã‚ã®æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ€ã„å‡ºã™ã¨ã€ä»Šã§ã‚‚å–‰ãŒè©°ã¾ã‚‹ã€‚å½¼ã¯ã€ã¾ã‚‹ã§è‡ªåˆ†ã®ç†æƒ³ãŒå¦å®šã•ã‚ŒãŸã‚ˆã†ãªã€æ·±ã„çµ¶æœ›æ„Ÿã«è‹›ã¾ã‚Œã¦ã„ãŸã€‚ç”»é¢ã«æ˜ ã—å‡ºã•ã‚ŒãŸã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã€è¼ã‹ã—ã„æœªæ¥ã‚’æã„ã¦ã„ãŸã¯ãšã ã€‚ã—ã‹ã—ã€ãã‚Œã¯ç¾å®Ÿã®å£ã«é˜»ã¾ã‚Œã€ç²‰ã€…ã«ç •ã‘æ•£ã£ãŸã€‚

å½¼ã¯ã€é ¬ã«æ‰‹ã‚’å½“ã¦ã€ç†±ã‚’ç¢ºã‹ã‚ãŸã€‚ã¾ã‚‹ã§ã€ç†±ãŒå†·ã‚ãã£ã¦ã—ã¾ã£ãŸè‡ªåˆ†ã®å¿ƒè‡“ã‚’å†·ã‚„ã—ã¦ã„ã‚‹ã‚ˆã†ã ã£ãŸã€‚

é«˜æ©‹èª ã¯ã€å¹¼ã„é ƒã‹ã‚‰ã€Œç¤¾ä¼šã«è²¢çŒ®ã—ãŸã„ã€ã¨ã„ã†å¼·ã„æ€ã„ã‚’æŒã£ã¦ã„ãŸã€‚ãã‚Œã¯ã€å½¼ã®ä¸¡è¦ªãŒå…±åƒãã§å¿™ã—ã„ä¸­ã§ã‚‚ã€åœ°åŸŸã®äººã€…ã®ãŸã‚ã«ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢æ´»å‹•ã‚’æ¬ ã‹ã•ãªã‹ã£ãŸå§¿ã‚’è¦‹ã¦è‚²ã£ãŸã‹ã‚‰ã ã‚ã†ã€‚å¤§å­¦ã§ã¯ã€ç¤¾ä¼šå­¦ã‚’å°‚æ”»ã—ã€ç¤¾ä¼šå•é¡Œã«ã¤ã„ã¦æ·±ãå­¦ã¶ã†ã¡ã«ã€ãã®æ€ã„ã¯ã•ã‚‰ã«å¼·ããªã£ãŸã€‚

æ–°å’ã®é›¢è·å•é¡Œã¯ã€å½¼ã®å¿ƒã‚’å¼·ãæºã•ã¶ã£ãŸã€‚å„ªç§€ãªäººæãŒã€çŸ­æœŸé–“ã§ä¼šç¤¾ã‚’è¾ã‚ã¦ã—ã¾ã†ã€‚ãã‚Œã¯ã€ä¼æ¥­ã«ã¨ã£ã¦ã‚‚ã€æœ¬äººã«ã¨ã£ã¦ã‚‚å¤§ããªæå¤±ã ã€‚å½¼ã¯ã€ã“ã®å•é¡Œã‚’è§£æ±ºã—ãŸã„ã¨å¼·ãé¡˜ã£ãŸã€‚

ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å¤±æ•—ã¯ã€å½¼ã®ç†æƒ³ã¨ç¾å®Ÿã®é–“ã®å¤§ããªæºã‚’æµ®ãå½«ã‚Šã«ã—ãŸã€‚å½¼ã¯ã€è‡ªåˆ†ã®ç„¡åŠ›ã•ã‚’ç—›æ„Ÿã—ãŸã€‚

ã€Œãªã‚‹ã»ã©â€¦ã€

å½¼ã¯ã€æœºã«ç½®ã‹ã‚ŒãŸãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³ã®ç”»é¢ã‚’ã¼ã‚“ã‚„ã‚Šã¨è¦‹ã¤ã‚ãªãŒã‚‰ã€å‘Ÿã„ãŸã€‚ãƒ¡ãƒ¢é­”ã§ã‚ã‚‹å½¼ã¯ã€ãã®æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®åçœç‚¹ã‚’ã³ã£ã—ã‚Šã¨æ›¸ãè¾¼ã‚“ã§ã„ãŸã€‚æ”¹å–„ç‚¹ã€èª²é¡Œã€ãã—ã¦ã€å¯©æŸ»å“¡ã‹ã‚‰ã®å³ã—ã„ã‚³ãƒ¡ãƒ³ãƒˆã€‚ã¾ã‚‹ã§ã€è‡ªåˆ†ã®å¼±ç‚¹ã‚’ä¸€ã¤ä¸€ã¤æš´ãå‡ºã™ã‚ˆã†ãªä½œæ¥­ã ã£ãŸã€‚

ãµã¨ã€å½¼ã®ç›®ã«é£›ã³è¾¼ã‚“ã§ããŸã®ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§å¶ç„¶è¦‹ã¤ã‘ãŸã€Œä¸­æœŸèµ·æ¥­å®¶è‚²æˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã®å‹Ÿé›†è¦é …ã ã£ãŸã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€è‹¥æ‰‹èµ·æ¥­å®¶ã‚’å¯¾è±¡ã¨ã—ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ©ãƒ³ã®ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã‹ã‚‰ã€è³‡é‡‘èª¿é”ã€çµŒå–¶ãƒã‚¦ãƒã‚¦ã¾ã§ã€å¹…åºƒã„ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹ã¨ã„ã†ã€‚

ã€Œè§£ã®è³ªã‚ˆã‚Šã€å•ã„ã®è³ªã€

å‹Ÿé›†è¦é …ã®ä¸­ã«æ›¸ã‹ã‚Œã¦ã„ãŸã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã®è¨€è‘‰ãŒã€å½¼ã®å¿ƒã‚’å¼·ãæºã•ã¶ã£ãŸã€‚å½¼ã¯ã€è‡ªåˆ†ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒç¾å®Ÿçš„ã§ã¯ãªã‹ã£ãŸç†ç”±ã‚’ã€ã¾ã•ã«ãã®è¨€è‘‰ã«é›†ç´„ã§ãã‚‹ã¨æ„Ÿã˜ãŸã€‚å½¼ã¯ã€å•é¡Œã®æœ¬è³ªã‚’æ·±ãç†è§£ã—ã€ãã‚Œã«å¯¾ã™ã‚‹ã€Œå•ã„ã€ã‚’çš„ç¢ºã«è¨­å®šã§ãã¦ã„ãªã‹ã£ãŸã®ã§ã¯ãªã„ã‹ã€‚

å½¼ã¯ã€æ·±ãè€ƒãˆè¾¼ã‚“ã ã€‚ãã—ã¦ã€çœ¼é¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãã£ã¨æŒ‡ã§ç›´ã—ãŸã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚åŠ ã¯ã€å½¼ã®ç†æƒ³ã¨ç¾å®Ÿã®ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã‚‹ãŸã‚ã®ã€æœ€åˆã®ä¸€æ­©ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

æ•°æ—¥å¾Œã€é«˜æ©‹èª ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜ä¼šã«å‚åŠ ã—ãŸã€‚ä¼šå ´ã«ã¯ã€ç†±æ„ã«æº€ã¡ãŸè‹¥è€…ãŸã¡ãŒé›†ã¾ã£ã¦ã„ãŸã€‚ã¾ã‚‹ã§ã€æœªæ¥ã¸ã®åœ°å›³ã‚’æ±‚ã‚ã¦é›†ã¾ã£ãŸå†’é™ºè€…ãŸã¡ã®ã‚ˆã†ã ã€‚

èª¬æ˜ä¼šå¾Œã€å½¼ã¯ä¸€äººã€ä¼šå ´ã®éš…ã§ã€é…å¸ƒã•ã‚ŒãŸè³‡æ–™ã«ç›®ã‚’é€šã—ã¦ã„ãŸã€‚ãã®æ™‚ã€ä¸€äººã®è€ç´³å£«ãŒå½¼ã«è©±ã—ã‹ã‘ã¦ããŸã€‚

ã€Œå›ã€ä½•ã‹å›°ã£ã¦ã„ã‚‹ã®ã‹ã„ï¼Ÿã€

ãã®ç´³å£«ã“ãã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ãƒ³ã‚¿ãƒ¼ã®ä¸€äººã§ã‚ã‚‹å±±ç”°å“²ä¹Ÿã ã£ãŸã€‚å±±ç”°ã¯ã€æ¸©å’Œãªç¬‘é¡”ã§å½¼ã‚’è¦‹ã¤ã‚ã€å½¼ã®ç›®ã«ã¯ã€æ·±ã„æ´å¯ŸåŠ›ãŒå®¿ã£ã¦ã„ãŸã€‚

ã€Œã„ãˆã€ç‰¹ã«â€¦ã€

é«˜æ©‹ã¯ã€å°‘ã—ç·Šå¼µã—ãªãŒã‚‰ç­”ãˆãŸã€‚

ã€Œå›ã®ç›®ã«ã¯ã€è¿·ã„ãŒè¦‹ãˆã‚‹ã€‚ãã‚Œã¯ã€æ‚ªã„ã“ã¨ã˜ã‚ƒãªã„ã€‚ã‚€ã—ã‚ã€æˆé•·ã®è¨¼ã ã€

å±±ç”°ã¯ã€å„ªã—ãèªã‚Šã‹ã‘ãŸã€‚ãã—ã¦ã€å½¼ã®è¨€è‘‰ã¯ã€é«˜æ©‹ã®å¿ƒã‚’æ·±ãæºã•ã¶ã£ãŸã€‚

ã€Œå›ã¯ã€ç¤¾ä¼šã‚’å¤‰ãˆãŸã„ã¨é¡˜ã£ã¦ã„ã‚‹ã®ã ã‚ã†ï¼Ÿ ãã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã€‚ã—ã‹ã—ã€ç†æƒ³ã ã‘ã§ã¯ã€ç¾å®Ÿã¯å¤‰ã‚ã‚‰ãªã„ã€‚å¤§åˆ‡ãªã®ã¯ã€ç¾å®Ÿã‚’ç›´è¦–ã—ã€å•é¡Œã®æœ¬è³ªã‚’è¦‹æŠœãã“ã¨ã ã€

å±±ç”°ã¯ã€ãã†è¨€ã†ã¨ã€å°‘ã—ã®é–“ã‚’ç½®ã„ã¦ã€ç¶šã‘ãŸã€‚

ã€Œè§£ã®è³ªã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã¯ã€ã¾ãšå•ã„ã®è³ªã‚’ä¸Šã’ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚å›ã¯ã€ã¾ã ãã®æ®µéšã«ã„ã‚‹ã€

é«˜æ©‹ã¯ã€å±±ç”°ã®è¨€è‘‰ã«æ·±ãæ„ŸéŠ˜ã‚’å—ã‘ãŸã€‚å½¼ã¯ã€è‡ªåˆ†ã®ç„¡åŠ›ã•ã‚’ç—›æ„Ÿã—ã¦ã„ãŸãŒã€åŒæ™‚ã«ã€å¸Œæœ›ã‚‚æ„Ÿã˜ã¦ã„ãŸã€‚å±±ç”°ã¨ã®å‡ºä¼šã„ã¯ã€å½¼ã®ç†æƒ³ã¨ç¾å®Ÿã®é–“ã®æºã‚’åŸ‹ã‚ã‚‹ãŸã‚ã®ã€å¤§ããªä¸€æ­©ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

ã€Œã‚‚ã—ã‚ˆã‘ã‚Œã°ã€ä¸€ç·’ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‚åŠ ã—ã¦ã¿ãªã„ã‹ï¼Ÿ å›ã®ç†±æ„ã¯ã€ç´ æ™´ã‚‰ã—ã„ã€‚ã—ã‹ã—ã€ãã‚Œã ã‘ã§ã¯è¶³ã‚Šãªã„ã€‚ç§ã¨ä¸€ç·’ã«ã€ãã®ç†±æ„ã‚’å½¢ã«ã—ã¦ã„ã“ã†ã€

å±±ç”°ã¯ã€é«˜æ©‹ã®ç›®ã‚’è¦‹ã¤ã‚ãªãŒã‚‰ã€ãã†è¨€ã£ãŸã€‚é«˜æ©‹ã¯ã€æ·±ãé ·ã„ãŸã€‚

ã€Œã¯ã„ã€ãœã²ã€ãŠé¡˜ã„ã—ã¾ã™ã€

å½¼ã®å¿ƒã¯ã€å¸Œæœ›ã«æº€ã¡ã¦ã„ãŸã€‚å½¼ã¯ã€ç†æƒ³ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ç¾å®Ÿã¨å‘ãåˆã„ã€ç²˜ã‚Šå¼·ãåŠªåŠ›ã™ã‚‹ã“ã¨ã‚’æ±ºæ„ã—ãŸã€‚å½¼ã®å†’é™ºã¯ã€ä»Šã€å§‹ã¾ã£ãŸã°ã‹ã‚Šãªã®ã ã€‚`,
        metadata: {
            businessAnalysis: null // å¾Œã§è¨­å®š
        }
    },
    {
        chapterNumber: 6,
        title: "ç¬¬6ç« ã€€ä¸‰äººä¸‰æ§˜ã®ç¾…é‡ç›¤",
        content: `é«˜æ©‹èª ã¯ã€ã‚ã®æ—¥ã®ãƒãƒƒã‚«ã‚½ãƒ³ä¼šå ´ã®ç†±æ°—ã‚’ä»Šã§ã‚‚é®®æ˜ã«æ€ã„å‡ºã™ã“ã¨ãŒã§ããŸã€‚ç„¡æ©Ÿè³ªãªã‚ªãƒ•ã‚£ã‚¹ãƒ“ãƒ«ã®ä¼šè­°å®¤ã«ã€æ§˜ã€…ãªä¼æ¥­ã‚„å¤§å­¦ã‹ã‚‰é›†ã¾ã£ãŸæŠ€è¡“è€…ãŸã¡ãŒã€ãã‚Œãã‚Œè‡ªæ…¢ã®æŠ€è¡“ã‚’æŒã¡å¯„ã‚Šã€å¾¹å¤œã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€‚å¾¹å¤œæ˜ã‘ã®ç–²åŠ´æ„Ÿã¨ã€æ–°ã—ã„æŠ€è¡“ã¸ã®æœŸå¾…æ„ŸãŒå…¥ã‚Šæ··ã˜ã£ãŸç‹¬ç‰¹ã®ç©ºæ°—ã€‚ãã“ã§ã€å½¼ã¯é‹å‘½çš„ãªå‡ºä¼šã„ã‚’æœãŸã—ãŸã€‚

ã€Œã™ã”ã„ã§ã™ã­ã€ä½è—¤ã•ã‚“ã€‚ã‚ã®AæŠ€è¡“ã€ã¾ã‚‹ã§é­”æ³•ã¿ãŸã„ã ã€

é«˜æ©‹ã¯ã€ä½è—¤å¥å¤ªãŒä½œã‚Šå‡ºã—ãŸãƒ‡ãƒ¢ã«ç›®ã‚’è¼ã‹ã›ãªãŒã‚‰ãã†è¨€ã£ãŸã€‚AæŠ€è¡“ã¯ã€ã¾ã é»æ˜æœŸã«ã‚ã‚‹æŠ€è¡“ã§ã€é«˜æ©‹ãŒè§£æ±ºã—ãŸã„ç¤¾ä¼šå•é¡Œã«ã€é©æ–°çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ã‚‚ãŸã‚‰ã™å¯èƒ½æ€§ã‚’ç§˜ã‚ã¦ã„ãŸã€‚ä½è—¤ã¯ã€ãã®æŠ€è¡“ã‚’é§†ä½¿ã—ã¦ã€ã¾ã‚‹ã§éŸ³æ¥½ã‚’å¥ã§ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ“ã£ã¦ã„ãŸã€‚

ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã¾ã ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã§ã™ãŒã€å¿œç”¨ç¯„å›²ã¯åºƒã„ã¨æ€ã„ã¾ã™ã€‚é«˜æ©‹ã•ã‚“ã®ãƒ“ã‚¸ãƒ§ãƒ³ã¨çµ„ã¿åˆã‚ã›ã‚Œã°ã€é¢ç™½ã„ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€

ä½è—¤ã¯ã€å°‘ã—ç…§ã‚Œè‡­ãã†ã«ã—ãªãŒã‚‰ã‚‚ã€è‡ªä¿¡ã«æº€ã¡ãŸè¡¨æƒ…ã§ç­”ãˆãŸã€‚å½¼ã®ç›®ã¯ã€æŠ€è¡“çš„ãªå¯èƒ½æ€§ã‚’è¿½ç©¶ã™ã‚‹ã“ã¨ã¸ã®ç´”ç²‹ãªå–œã³ã§è¼ã„ã¦ã„ãŸã€‚

é«˜æ©‹ã¯ã€ä½è—¤ã®æŠ€è¡“åŠ›ã¨ã€ãã®æŠ€è¡“ã«å¯¾ã™ã‚‹æƒ…ç†±ã«å¿ƒã‚’å¥ªã‚ã‚ŒãŸã€‚å½¼ã®ç†æƒ³ã‚’å…·ç¾åŒ–ã™ã‚‹ãŸã‚ã®ã€ã‹ã‘ãŒãˆã®ãªã„ãƒ”ãƒ¼ã‚¹ã ã¨ç›´æ„Ÿã—ãŸã€‚ãã®å ´ã§ã€é«˜æ©‹ã¯è‡ªåˆ†ã®èµ·æ¥­ã¸ã®ç†±ã„æ€ã„ã‚’èªã‚Šå§‹ã‚ãŸã€‚

ã€Œå®Ÿã¯ã€ç§ã¯ã€‡ã€‡å•é¡Œã®è§£æ±ºã‚’ç›®æŒ‡ã—ã¦èµ·æ¥­ã—ãŸã„ã‚“ã§ã™ã€‚ã“ã®AæŠ€è¡“ã‚’ä½¿ãˆã°ã€ç”»æœŸçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã§ãã‚‹ã¯ãšãªã‚“ã§ã™ã€

é«˜æ©‹ã®è¨€è‘‰ã«ã€ä½è—¤ã¯æ·±ãé ·ã„ãŸã€‚

ã€Œãªã‚‹ã»ã©ã€‚ãã®å•é¡Œã¯ã€æŠ€è¡“çš„ã«éå¸¸ã«ã‚„ã‚ŠãŒã„ãŒã‚ã‚Šã¾ã™ã­ã€‚å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’è€ƒãˆã¦ã„ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€

äºŒäººã¯æ„æ°—æŠ•åˆã—ã€ãƒãƒƒã‚«ã‚½ãƒ³ãŒçµ‚ã‚ã£ãŸå¾Œã‚‚ã€é »ç¹ã«é€£çµ¡ã‚’å–ã‚Šåˆã†ã‚ˆã†ã«ãªã£ãŸã€‚é«˜æ©‹ã¯è‡ªåˆ†ã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚’èªã‚Šã€ä½è—¤ã¯æŠ€è¡“çš„ãªå¯èƒ½æ€§ã‚’å…·ä½“çš„ã«èª¬æ˜ã™ã‚‹ã€‚ã¾ã‚‹ã§ãƒ‘ã‚ºãƒ«ã®ãƒ”ãƒ¼ã‚¹ãŒçµ„ã¿åˆã‚ã•ã‚‹ã‚ˆã†ã«ã€äºŒäººã®æ€è€ƒã¯èåˆã—ã¦ã„ã£ãŸã€‚

ãã—ã¦ã€é‹å‘½ã®æ­¯è»Šã¯ã•ã‚‰ã«å›ã‚Šå§‹ã‚ãŸã€‚é«˜æ©‹ã¯ã€ä»¥å‰ã‹ã‚‰ã®çŸ¥ã‚Šåˆã„ã§ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã®çŸ¥è­˜ãŒè±Šå¯Œãªéˆ´æœ¨ç¾å’²ã«ã€å”åŠ›ã‚’ä»°ã„ã ã®ã ã€‚

ã€Œç¾å’²ã•ã‚“ã€ã‚‚ã—ã‚ˆã‘ã‚Œã°ã€ç§ã®èµ·æ¥­ã‚’æ‰‹ä¼ã£ã¦ãã‚Œã¾ã›ã‚“ã‹ï¼Ÿä½è—¤ã•ã‚“ã¨ä¸€ç·’ã«ã€ç¤¾ä¼šå•é¡Œã‚’è§£æ±ºã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚ŠãŸã„ã‚“ã§ã™ã€

é«˜æ©‹ã®ç†±æ„ã«ã€ç¾å’²ã¯å¿«ãå¿œã˜ãŸã€‚

ã€Œé¢ç™½ãã†ï¼ã©ã‚“ãªã‚µãƒ¼ãƒ“ã‚¹ãªã®ï¼Ÿãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã‹ã‚‰ã€ä¸€ç·’ã«è€ƒãˆã¦ã¿ãŸã„ã‚ã€

ã“ã†ã—ã¦ã€é«˜æ©‹èª ã€ä½è—¤å¥å¤ªã€éˆ´æœ¨ç¾å’²ã®3äººã‚’ä¸­å¿ƒã«ã€æœ€åˆã®ã‚³ã‚¢ãƒãƒ¼ãƒ ãŒå½¢æˆã•ã‚ŒãŸã€‚ãã‚Œãã‚Œã®åˆ†é‡ã§é«˜ã„èƒ½åŠ›ã‚’æŒã¤å½¼ã‚‰ã¯ã€äº’ã„ã®å¼·ã¿ã‚’æ´»ã‹ã—ã€å¼±ã¿ã‚’è£œå®Œã—åˆã†ã€ç†æƒ³çš„ãªãƒãƒ¼ãƒ ã«è¦‹ãˆãŸã€‚

æœ€åˆã®è­°é¡Œã¯ã€å…·ä½“çš„ãªã‚µãƒ¼ãƒ“ã‚¹æ§‹æƒ³ã‚’ç·´ã‚‹ã“ã¨ã ã£ãŸã€‚é«˜æ©‹ã¯ã€è§£æ±ºã—ãŸã„ç¤¾ä¼šå•é¡Œã‚’è©³ç´°ã«èª¬æ˜ã—ã€ç†æƒ³ã®ã‚µãƒ¼ãƒ“ã‚¹åƒã‚’èªã£ãŸã€‚

ã€Œã¾ãšã¯ã€ã€‡ã€‡å•é¡Œã®ç¾çŠ¶ã‚’åˆ†æã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ±ãˆã‚‹èª²é¡Œã‚’æ˜ç¢ºã«ã—ã¾ã—ã‚‡ã†ã€‚ãã—ã¦ã€AæŠ€è¡“ã‚’æ´»ç”¨ã—ã¦ã€é©æ–°çš„ãªè§£æ±ºç­–ã‚’æä¾›ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€

é«˜æ©‹ã¯ã€çœŸå‰£ãªé¢æŒã¡ã§ãã†è¨€ã£ãŸã€‚å½¼ã¯ã€ç†æƒ³ã¨ç¾å®Ÿã®ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã‚‹ãŸã‚ã«ã€ç¶¿å¯†ãªè¨ˆç”»ã‚’ç«‹ã¦ã€ç€å®Ÿã«å®Ÿè¡Œã—ã¦ã„ãã¤ã‚‚ã‚Šã ã£ãŸã€‚

ä½è—¤ã¯ã€é«˜æ©‹ã®ãƒ“ã‚¸ãƒ§ãƒ³ã«å…±æ„Ÿã—ã¤ã¤ã‚‚ã€æŠ€è¡“çš„ãªå®Ÿç¾å¯èƒ½æ€§ã¨åŠ¹ç‡æ€§ã‚’é‡è¦–ã—ãŸã€‚

ã€ŒæŠ€è¡“çš„ã«ã¯ã€AæŠ€è¡“ã‚’ã€‡ã€‡ã¨ã„ã†å½¢ã§æ´»ç”¨ã™ã‚Œã°ã€éå¸¸ã«åŠ¹æœçš„ã ã¨æ€ã„ã¾ã™ã€‚ãŸã ã€ç¾æ™‚ç‚¹ã§ã¯ã€å‡¦ç†é€Ÿåº¦ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é¢ã§èª²é¡ŒãŒã‚ã‚Šã¾ã™ã­ã€‚ãã®ã‚ãŸã‚Šã‚‚è€ƒæ…®ã—ãªãŒã‚‰ã€ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’é–‹ç™ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€

å½¼ã¯ã€ç”»é¢ã«ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã—ãªãŒã‚‰ã€å†·é™ã«åˆ†æã—ãŸã€‚å½¼ã®ç›®ã¯ã€æŠ€è¡“çš„ãªèª²é¡Œã¨å¯èƒ½æ€§ã‚’åŒæ™‚ã«æ‰ãˆã€æœ€é©è§£ã‚’æ¢æ±‚ã—ã¦ã„ãŸã€‚

ä¸€æ–¹ã€ç¾å’²ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã‹ã‚‰ã€ã‚µãƒ¼ãƒ“ã‚¹ã®é­…åŠ›ã¨ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã®é‡è¦æ€§ã‚’è¨´ãˆãŸã€‚

ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ±‚ã‚ã‚‹ã®ã¯ã€å˜ãªã‚‹æŠ€è¡“çš„ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªãã€çœŸã«ä¾¡å€¤ã®ã‚ã‚‹ä½“é¨“ã§ã™ã€‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤ã‚’æ˜ç¢ºã«ã—ã€å½¼ã‚‰ã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã«ã¯ã€è©³ç´°ãªå¸‚å ´èª¿æŸ»ã¨ã€åŠ¹æœçš„ãªãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥ãŒä¸å¯æ¬ ã§ã™ã€

ç¾å’²ã¯ã€ãƒãƒ¼ãƒˆã«ãƒ¡ãƒ¢ã‚’å–ã‚ŠãªãŒã‚‰ã€ç†±å¿ƒã«èªã£ãŸã€‚å½¼å¥³ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿ƒã«éŸ¿ãã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚Šå‡ºã™ãŸã‚ã«ã€å¾¹åº•çš„ã«è€ƒãˆæŠœãã€è¡Œå‹•ã™ã‚‹ã¤ã‚‚ã‚Šã ã£ãŸã€‚

æœ€åˆã®ã‚µãƒ¼ãƒ“ã‚¹æ§‹æƒ³ã‚’ç·´ã‚‹ä¸­ã§ã€ãã‚Œãã‚Œã®è€ƒãˆæ–¹ã®é•ã„ãŒå¾ã€…ã«è¡¨é¢åŒ–ã—å§‹ã‚ãŸã€‚é«˜æ©‹ã¯ã€ç†æƒ³ã‚’è¿½ã„æ±‚ã‚ã‚‹ã‚ã¾ã‚Šã€ç¾å®Ÿçš„ãªåˆ¶ç´„ã‚’è¦‹è½ã¨ã—ãŒã¡ã ã£ãŸã€‚ä½è—¤ã¯ã€æŠ€è¡“çš„ãªå´é¢ã«é›†ä¸­ã™ã‚‹ã‚ã¾ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‹ãƒ¼ã‚ºã‚„ãƒ“ã‚¸ãƒã‚¹çš„ãªè¦³ç‚¹ã‚’è»½è¦–ã™ã‚‹ã“ã¨ãŒã‚ã£ãŸã€‚ç¾å’²ã¯ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã«ã“ã ã‚ã‚Šã™ãã¦ã€æŠ€è¡“çš„ãªå®Ÿç¾å¯èƒ½æ€§ã‚’è»½è¦–ã™ã‚‹ã“ã¨ãŒã‚ã£ãŸã€‚

ã‚ã‚‹æ—¥ã€é«˜æ©‹ã¯ã€ä½è—¤ã®ææ¡ˆã—ãŸæŠ€è¡“çš„ä»•æ§˜ã«å¯¾ã—ã¦ã€ç†æƒ³ã¨ã®ãšã‚Œã‚’æ„Ÿã˜ã€ä¸æº€ã‚’æ¼ã‚‰ã—ãŸã€‚

ã€Œä½è—¤ã•ã‚“ã€ã‚‚ã†å°‘ã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã™ã‚‹ã¹ãã ã¨æ€ã„ã¾ã™ã€‚æŠ€è¡“çš„ãªã“ã¨ã¯ç´ æ™´ã‚‰ã—ã„ã®ã§ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç†è§£ã§ããªã‘ã‚Œã°æ„å‘³ãŒãªã„ã‚“ã§ã™ã€

é«˜æ©‹ã¯ã€çœ¼é¡ã‚’ç›´ã—ãªãŒã‚‰ã€å°‘ã—è‹›ç«‹ã£ãŸæ§˜å­ã§è¨€ã£ãŸã€‚å½¼ã¯ã€ç†æƒ³ã¨ç¾å®Ÿã®ã‚®ãƒ£ãƒƒãƒ—ã«ç›´é¢ã—ã€è‘›è—¤ã—ã¦ã„ãŸã€‚

ä½è—¤ã¯ã€é«˜æ©‹ã®è¨€è‘‰ã‚’èãã€å°‘ã—é¡”ã‚’ã—ã‹ã‚ãŸã€‚

ã€ŒæŠ€è¡“çš„ãªåˆ¶ç´„ãŒã‚ã‚‹ã‚“ã§ã™ã€‚ä½¿ã„ã‚„ã™ã•ã ã‘ã‚’è¿½æ±‚ã™ã‚‹ã¨ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾¡å€¤ãŒæãªã‚ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æŠ€è¡“çš„ãªå¦¥å”ã¯é¿ã‘ãŸã„ã‚“ã§ã™ã€

ä½è—¤ã¯ã€å†·é™ã«åè«–ã—ãŸã€‚å½¼ã¯ã€è‡ªåˆ†ã®æŠ€è¡“ã‚’æœ€å¤§é™ã«æ´»ã‹ã™ãŸã‚ã«ã€å¦¥å”ã‚’è¨±ã•ãªã„å§¿å‹¢ã ã£ãŸã€‚

ç¾å’²ã¯ã€äºŒäººã®ã‚„ã‚Šå–ã‚Šã‚’è¦‹ã¦ã€ä»²è£ã«å…¥ã£ãŸã€‚

ã€ŒãŠäºŒäººã¨ã‚‚ã€ãã‚Œãã‚Œã®æ„è¦‹ã¯ã‚ˆãåˆ†ã‹ã‚Šã¾ã™ã€‚ã§ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦æœ€é«˜ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚ã«ã¯ã€æŠ€è¡“çš„ãªå®Ÿç¾å¯èƒ½æ€§ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®ä¸¡æ–¹ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšã¯ã€ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ä½œã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå¿œã‚’è¦‹ãªãŒã‚‰ã€æ”¹å–„ã—ã¦ã„ãã®ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿã€

ç¾å’²ã¯ã€ç¬‘é¡”ã§ææ¡ˆã—ãŸã€‚å½¼å¥³ã¯ã€ãƒãƒ¼ãƒ ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ã€æœ€é©ãªæ–¹æ³•ã‚’æ¢æ±‚ã—ã¦ã„ãŸã€‚

é«˜æ©‹ã¯ã€æ·±ãè€ƒãˆè¾¼ã¿ã€ãƒ¡ãƒ¢ã‚’å–ã‚Šå§‹ã‚ãŸã€‚ä½è—¤ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ‰‹ã‚’æ­¢ã‚ã€ç¾å’²ã®æ„è¦‹ã«è€³ã‚’å‚¾ã‘ãŸã€‚ä¸‰äººã®é–“ã«ã€å¾®ã‹ãªç·Šå¼µæ„ŸãŒæ¼‚ã£ã¦ã„ãŸã€‚

ãã‚Œãã‚Œã®ç¾…é‡ç›¤ã¯ã€ã¾ã åŒã˜æ–¹å‘ã‚’æŒ‡ã—ã¦ã„ãªã„ã€‚ã—ã‹ã—ã€å½¼ã‚‰ã¯ã€äº’ã„ã®é•ã„ã‚’èªã‚ã€ç†è§£ã—ã€å”åŠ›ã™ã‚‹ã“ã¨ã§ã€ç†æƒ³ã®å®Ÿç¾ã«å‘ã‹ã£ã¦é€²ã‚“ã§ã„ãã¯ãšã ã€‚æ¬¡ã®ç« ã§ã¯ã€å½¼ã‚‰ã¯ã©ã®ã‚ˆã†ã«ã—ã¦ã€ã“ã®æœ€åˆã®å£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹ã®ã ã‚ã†ã‹ã€‚`,
        metadata: {
            businessAnalysis: null // å¾Œã§è¨­å®š
        }
    }
];

async function testBusinessKnowledgeAnalysis() {
    console.log('ğŸ¢ ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆåˆ†æãƒ†ã‚¹ãƒˆé–‹å§‹\n');

    try {
        const analyzer = new BusinessKnowledgeAnalyzer();

        // å„ç« ã®ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜åˆ†æ
        generatedChapters.forEach(chapter => {
            chapter.metadata.businessAnalysis = analyzer.analyzeBusinessKnowledge(
                chapter.content, 
                chapter.chapterNumber
            );
        });

        // ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«è©•ä¾¡
        const systemEvaluation = analyzer.evaluateSystemBusinessPotential(generatedChapters);

        // è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ
        console.log('\nğŸ“„ è©³ç´°ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ« ãƒ¬ãƒãƒ¼ãƒˆ');
        console.log('â•'.repeat(80));

        // ç¾åœ¨ã®å¼·ã¿
        console.log('\nâœ… ç¾åœ¨ã®å¼·ã¿:');
        
        if (systemEvaluation.overallPotential >= 0.6) {
            console.log('   â€¢ ã‚·ã‚¹ãƒ†ãƒ ã¯åŸºæœ¬çš„ãªãƒ“ã‚¸ãƒã‚¹å­¦ç¿’è¦ç´ ã‚’å«ã‚“ã§ã„ã¾ã™');
        }
        
        const hasIssueDriver = generatedChapters.some(ch => 
            ch.metadata.businessAnalysis.knowledgePresence.ISSUE_DRIVEN?.score > 0
        );
        if (hasIssueDriver) {
            console.log('   â€¢ ISSUE DRIVENï¼ˆèª²é¡Œèµ·ç‚¹æ€è€ƒï¼‰ã®æ¦‚å¿µãŒå«ã¾ã‚Œã¦ã„ã¾ã™');
        }

        const hasGrowthElements = generatedChapters.some(ch =>
            ch.metadata.businessAnalysis.characterGrowth > 0.3
        );
        if (hasGrowthElements) {
            console.log('   â€¢ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æˆé•·ã‚’é€šã—ãŸå­¦ç¿’è¦ç´ ãŒã‚ã‚Šã¾ã™');
        }

        // ä¸è¶³ã—ã¦ã„ã‚‹è¦ç´ 
        console.log('\nâš ï¸ ä¸è¶³ã—ã¦ã„ã‚‹é‡è¦ãªãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜:');
        
        const missingKnowledge = [];
        const importantKnowledge = [
            'ADLER_PSYCHOLOGY', 'MASLOW_HIERARCHY', 'SEVEN_HABITS', 
            'DRUCKER_MANAGEMENT', 'KOTLER_MARKETING', 'FINANCIAL_STATEMENTS'
        ];
        
        importantKnowledge.forEach(knowledge => {
            const isPresent = generatedChapters.some(ch =>
                ch.metadata.businessAnalysis.knowledgePresence[knowledge]?.score > 0.1
            );
            if (!isPresent) {
                missingKnowledge.push(knowledge);
            }
        });

        missingKnowledge.forEach(knowledge => {
            const knowledgeNames = {
                'ADLER_PSYCHOLOGY': 'ã‚¢ãƒ‰ãƒ©ãƒ¼å¿ƒç†å­¦ï¼ˆèª²é¡Œã®åˆ†é›¢ã€æ‰¿èªæ¬²æ±‚ã‹ã‚‰ã®è„±å´ï¼‰',
                'MASLOW_HIERARCHY': 'ãƒã‚ºãƒ­ãƒ¼ã®æ¬²æ±‚5æ®µéšèª¬ï¼ˆå‹•æ©Ÿç†è«–ï¼‰',
                'SEVEN_HABITS': '7ã¤ã®ç¿’æ…£ï¼ˆåŠ¹æœçš„ãªäººæ ¼å½¢æˆï¼‰',
                'DRUCKER_MANAGEMENT': 'ãƒ‰ãƒ©ãƒƒã‚«ãƒ¼ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆç†è«–',
                'KOTLER_MARKETING': 'ã‚³ãƒˆãƒ©ãƒ¼ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥',
                'FINANCIAL_STATEMENTS': 'è²¡å‹™è«¸è¡¨ï¼ˆPLãƒ»BSãƒ»CFï¼‰ã®ç†è§£'
            };
            console.log(`   â€¢ ${knowledgeNames[knowledge] || knowledge}`);
        });

        // å…·ä½“çš„ãªæ”¹å–„ææ¡ˆ
        console.log('\nğŸ’¡ ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’å¼·åŒ–ã®ãŸã‚ã®å…·ä½“çš„ææ¡ˆ:');
        
        console.log('\n1. ã€æ®µéšçš„ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆã€‘');
        console.log('   â€¢ ç¬¬1-5ç« : åŸºç¤çš„æ€è€ƒæ³•ï¼ˆISSUE DRIVENã€0ç§’æ€è€ƒã€åœ°é ­åŠ›ï¼‰');
        console.log('   â€¢ ç¬¬6-10ç« : äººé–“é–¢ä¿‚ãƒ»å¿ƒç†å­¦ï¼ˆã‚¢ãƒ‰ãƒ©ãƒ¼ã€ãƒã‚ºãƒ­ãƒ¼ã€ã‚«ãƒ¼ãƒã‚®ãƒ¼ï¼‰');
        console.log('   â€¢ ç¬¬11-15ç« : ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãƒ»æˆ¦ç•¥ï¼ˆãƒ‰ãƒ©ãƒƒã‚«ãƒ¼ã€å­«æ°ã®å…µæ³•ï¼‰');
        console.log('   â€¢ ç¬¬16-20ç« : ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»å–¶æ¥­ï¼ˆã‚³ãƒˆãƒ©ãƒ¼ã€ä¼ãˆæ–¹ãŒ9å‰²ï¼‰');
        console.log('   â€¢ ç¬¬21-25ç« : è²¡å‹™ãƒ»çµŒå–¶ï¼ˆPLãƒ»BSãƒ»CFã€æ ªå¼ä¼šç¤¾ã®ä»•çµ„ã¿ï¼‰');
        console.log('   â€¢ ç¬¬26-30ç« : æˆåŠŸå“²å­¦ãƒ»ç·åˆï¼ˆãƒŠãƒãƒ¬ã‚ªãƒ³ãƒ’ãƒ«ã€7ã¤ã®ç¿’æ…£ï¼‰');

        console.log('\n2. ã€è‡ªç„¶ãªå­¦ç¿’ä½“é¨“è¨­è¨ˆã€‘');
        console.log('   â€¢ å¤±æ•—ä½“é¨“â†’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å­¦ç¿’â†’å®Ÿè·µâ†’æˆæœã®ã‚µã‚¤ã‚¯ãƒ«');
        console.log('   â€¢ ãƒ¡ãƒ³ã‚¿ãƒ¼ã¨ã®å¯¾è©±ã«ã‚ˆã‚‹ã‚½ã‚¯ãƒ©ãƒ†ã‚¹å¼å­¦ç¿’');
        console.log('   â€¢ ãƒãƒ¼ãƒ å†…ã§ã®è­°è«–ã‚’é€šã—ãŸå¤šè§’çš„ç†è§£');
        console.log('   â€¢ å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹å ´é¢ã§ã®çŸ¥è­˜å¿œç”¨');

        console.log('\n3. ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„æ¡ˆã€‘');
        console.log('   â€¢ å„ç« ã«ç‰¹å®šã®ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å­¦ç¿’ç›®æ¨™ã¨ã—ã¦è¨­å®š');
        console.log('   â€¢ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èª²é¡Œè§£æ±ºãƒ—ãƒ­ã‚»ã‚¹ã«ãƒ“ã‚¸ãƒã‚¹ç†è«–ã‚’çµ„ã¿è¾¼ã¿');
        console.log('   â€¢ èª­è€…ãŒã€Œãªã‚‹ã»ã©ï¼ã€ã¨æ°—ã¥ã‘ã‚‹å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆã‚’æ˜ç¤º');
        console.log('   â€¢ å®Ÿè·µçš„ãªå¿œç”¨ä¾‹ã‚’å«ã‚ãŸçŸ¥è­˜ã®å®šç€ä¿ƒé€²');

        console.log('\n4. ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­è¨ˆã®æœ€é©åŒ–ã€‘');
        console.log('   â€¢ é«˜æ©‹èª : ç†è«–å­¦ç¿’â†’å®Ÿè·µé©ç”¨ã®ãƒ¡ã‚¤ãƒ³å­¦ç¿’è€…');
        console.log('   â€¢ å±±ç”°å“²ä¹Ÿ: çµŒé¨“è±Šå¯Œãªãƒ¡ãƒ³ã‚¿ãƒ¼ã¨ã—ã¦å„ç¨®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æŒ‡å°');
        console.log('   â€¢ ä½è—¤å¥å¤ª: æŠ€è¡“ã¨çµŒå–¶ã®èåˆã—ãŸè¦–ç‚¹ã‚’æä¾›');
        console.log('   â€¢ éˆ´æœ¨ç¾å’²: ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»é¡§å®¢è¦–ç‚¹ã®å°‚é–€å®¶');
        console.log('   â€¢ ä¸­æ‘å¤§è¼”: å¯¾ç…§çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚‹å­¦ç¿’æ©Ÿä¼šã®å‰µå‡º');

        // æœŸå¾…ã•ã‚Œã‚‹å­¦ç¿’åŠ¹æœ
        console.log('\nğŸ¯ æœŸå¾…ã•ã‚Œã‚‹å­¦ç¿’åŠ¹æœ:');
        console.log('   â€¢ èª­è€…ãŒä¸»äººå…¬ã¨å…±ã«ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½“é¨“å­¦ç¿’');
        console.log('   â€¢ ç†è«–â†’å®Ÿè·µâ†’æŒ¯ã‚Šè¿”ã‚Šã®ã‚µã‚¤ã‚¯ãƒ«ã«ã‚ˆã‚‹æ·±ã„ç†è§£');
        console.log('   â€¢ å¤±æ•—ã¨æˆåŠŸã‚’é€šã—ãŸãƒªã‚¢ãƒ«ãªãƒ“ã‚¸ãƒã‚¹ä½“é¨“');
        console.log('   â€¢ çµŒå–¶ã«å¿…è¦ãªçŸ¥è­˜ã®ä½“ç³»çš„ç¿’å¾—');

        // ã‚¹ã‚³ã‚¢åˆ¤å®š
        console.log('\nğŸ“Š ç·åˆè©•ä¾¡:');
        if (systemEvaluation.overallPotential >= 0.8) {
            console.log('ğŸ† å„ªç§€: ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦é«˜ã„ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’ç™ºæ®');
        } else if (systemEvaluation.overallPotential >= 0.6) {
            console.log('ğŸ¥‰ è‰¯å¥½: åŸºæœ¬çš„ãªãƒ“ã‚¸ãƒã‚¹å­¦ç¿’è¦ç´ ã¯ã‚ã‚‹ãŒã€å¤§å¹…ãªæ”¹å–„ä½™åœ°ã‚ã‚Š');
        } else if (systemEvaluation.overallPotential >= 0.4) {
            console.log('ğŸŸ¡ ä¸­ç¨‹åº¦: ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’è¦ç´ ãŒä¸è¶³ã€å¼·åŒ–ãŒå¿…è¦');
        } else {
            console.log('ğŸ”´ è¦æ”¹å–„: ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã®æ©Ÿèƒ½ãŒä¸ååˆ†');
        }

        console.log(`\næœ€çµ‚ã‚¹ã‚³ã‚¢: ${systemEvaluation.overallPotential.toFixed(2)}/1.0`);

        // ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
        const reportPath = 'test-output/business-analysis-report.md';
        const reportContent = generateBusinessReport(systemEvaluation, generatedChapters);
        fs.writeFileSync(reportPath, reportContent, 'utf8');
        console.log(`\nğŸ’¾ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆä¿å­˜: ${reportPath}`);

        console.log('\nğŸ‰ ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆåˆ†æå®Œäº†ï¼');

    } catch (error) {
        console.error('\nğŸ’¥ åˆ†æã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ:');
        console.error(`ã‚¨ãƒ©ãƒ¼: ${error.message}`);
        console.error(`ã‚¹ã‚¿ãƒƒã‚¯: ${error.stack?.split('\n').slice(0, 3).join('\n')}`);
        process.exit(1);
    }
}

function generateBusinessReport(systemEvaluation, chapters) {
    let report = `# ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆåˆ†æãƒ¬ãƒãƒ¼ãƒˆ

**ç”Ÿæˆæ—¥æ™‚**: ${new Date().toISOString()}
**ç·åˆãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«**: ${systemEvaluation.overallPotential.toFixed(2)}/1.0

## æ¦‚è¦

ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯ã€å°èª¬ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’è©•ä¾¡ã—ãŸã‚‚ã®ã§ã™ã€‚
ç‰¹ã«çµŒå–¶ãƒ»ãƒ“ã‚¸ãƒã‚¹æ›¸ã®çŸ¥è­˜ã‚’ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æˆé•·ã‚’é€šã—ã¦è‡ªç„¶ã«å­¦ã¹ã‚‹è¨­è¨ˆã«ãªã£ã¦ã„ã‚‹ã‹ã‚’åˆ†æã—ã¾ã—ãŸã€‚

## ã‚·ã‚¹ãƒ†ãƒ è©•ä¾¡çµæœ

### å…¨ä½“ã‚¹ã‚³ã‚¢
- **çŸ¥è­˜ç¶²ç¾…æ€§**: ${systemEvaluation.knowledgeCoverage.toFixed(2)}/1.0
- **å­¦ç¿’é€²æ­©æ€§**: ${systemEvaluation.learningProgression.toFixed(2)}/1.0  
- **å®Ÿè·µé–¢é€£æ€§**: ${systemEvaluation.practicalRelevance.toFixed(2)}/1.0
- **è‡ªç„¶çµ±åˆæ€§**: ${systemEvaluation.naturalIntegration.toFixed(2)}/1.0

### ç« åˆ¥åˆ†æ

`;

    chapters.forEach(chapter => {
        report += `#### ${chapter.title}

**ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤**: ${chapter.metadata.businessAnalysis.overallBusinessValue.toFixed(2)}/1.0

**æ¤œå‡ºã•ã‚ŒãŸãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜**:
`;
        Object.keys(chapter.metadata.businessAnalysis.knowledgePresence).forEach(knowledge => {
            const presence = chapter.metadata.businessAnalysis.knowledgePresence[knowledge];
            if (presence.score > 0) {
                report += `- ${knowledge}: ${presence.score.toFixed(2)} (${presence.detectedElements.slice(0, 2).join(', ')})\n`;
            }
        });

        report += `
**å­¦ç¿’è¦ç´ **:
- ç™ºè¦‹çš„å­¦ç¿’: ${chapter.metadata.businessAnalysis.learningElements.discovery?.score.toFixed(2) || '0.00'}
- å†…çœçš„å­¦ç¿’: ${chapter.metadata.businessAnalysis.learningElements.reflection?.score.toFixed(2) || '0.00'}
- å¿œç”¨çš„å­¦ç¿’: ${chapter.metadata.businessAnalysis.learningElements.application?.score.toFixed(2) || '0.00'}
- æˆé•·çš„å­¦ç¿’: ${chapter.metadata.businessAnalysis.learningElements.growth?.score.toFixed(2) || '0.00'}

`;
    });

    report += `## æ”¹å–„ææ¡ˆ

### 1. ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜ã®æ®µéšçš„çµ±åˆ
`;
    systemEvaluation.recommendations.forEach((rec, index) => {
        report += `${index + 1}. ${rec}\n`;
    });

    report += `
### 2. å…·ä½“çš„ãªå­¦ç¿’è¨­è¨ˆæ”¹å–„æ¡ˆ

#### ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆç¬¬1-5ç« ï¼‰: æ€è€ƒåŸºç›¤ã®æ§‹ç¯‰
- ISSUE DRIVENæ€è€ƒæ³•ã®ç¿’å¾—
- 0ç§’æ€è€ƒã«ã‚ˆã‚‹åˆ¤æ–­åŠ›å‘ä¸Š  
- ãƒ•ã‚§ãƒ«ãƒŸæ¨å®šã«ã‚ˆã‚‹è«–ç†çš„æ€è€ƒåŠ›

#### ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆç¬¬6-10ç« ï¼‰: äººé–“é–¢ä¿‚ã¨ãƒãƒ¼ãƒ å½¢æˆ
- ã‚¢ãƒ‰ãƒ©ãƒ¼å¿ƒç†å­¦ã«ã‚ˆã‚‹è‡ªç«‹ã—ãŸæ€è€ƒ
- ãƒã‚ºãƒ­ãƒ¼ã®æ¬²æ±‚ç†è«–ã«ã‚ˆã‚‹å‹•æ©Ÿç†è§£
- ã‚«ãƒ¼ãƒã‚®ãƒ¼ã®äººé–“é–¢ä¿‚è¡“

#### ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆç¬¬11-15ç« ï¼‰: æˆ¦ç•¥ã¨ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ
- å­«æ°ã®å…µæ³•ã«ã‚ˆã‚‹æˆ¦ç•¥æ€è€ƒ
- ãƒ‰ãƒ©ãƒƒã‚«ãƒ¼ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆç†è«–
- çµ„ç¹”é‹å–¶ã®å®Ÿè·µ

#### ãƒ•ã‚§ãƒ¼ã‚º4ï¼ˆç¬¬16-20ç« ï¼‰: ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã¨é¡§å®¢ç†è§£
- ã‚³ãƒˆãƒ©ãƒ¼ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥
- é¡§å®¢è¦–ç‚¹ã®é‡è¦æ€§
- ä¼ãˆæ–¹ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

#### ãƒ•ã‚§ãƒ¼ã‚º5ï¼ˆç¬¬21-25ç« ï¼‰: è²¡å‹™ã¨çµŒå–¶æŒ‡æ¨™
- PLãƒ»BSãƒ»CFã®ç†è§£ã¨æ´»ç”¨
- æ ªå¼ä¼šç¤¾ã®ä»•çµ„ã¿
- æŠ•è³‡ã¨è³‡é‡‘èª¿é”

#### ãƒ•ã‚§ãƒ¼ã‚º6ï¼ˆç¬¬26-30ç« ï¼‰: æˆåŠŸå“²å­¦ã¨ç·åˆå®Ÿè·µ
- ãƒŠãƒãƒ¬ã‚ªãƒ³ãƒ’ãƒ«ã®æˆåŠŸå“²å­¦
- 7ã¤ã®ç¿’æ…£ã«ã‚ˆã‚‹äººæ ¼å½¢æˆ
- å­¦ã‚“ã çŸ¥è­˜ã®ç·åˆå®Ÿè·µ

## çµè«–

ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã¯åŸºæœ¬çš„ãªãƒ“ã‚¸ãƒã‚¹å­¦ç¿’è¦ç´ ã‚’å«ã‚“ã§ã„ã¾ã™ãŒã€
ä½“ç³»çš„ãªãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜ã®çµ±åˆã¨ã„ã†è¦³ç‚¹ã§ã¯å¤§å¹…ãªæ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚

ç‰¹ã«ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æˆé•·ãƒ—ãƒ­ã‚»ã‚¹ã«ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’è‡ªç„¶ã«çµ„ã¿è¾¼ã¿ã€
èª­è€…ãŒä¸»äººå…¬ã¨å…±ã«å­¦ç¿’ä½“é¨“ã‚’å¾—ã‚‰ã‚Œã‚‹è¨­è¨ˆã®å¼·åŒ–ãŒé‡è¦ã§ã™ã€‚

---

*æœ¬ãƒ¬ãƒãƒ¼ãƒˆã¯å°èª¬ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®ãƒ“ã‚¸ãƒã‚¹å­¦ç¿’ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«åˆ†æã«åŸºã¥ã„ã¦ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚*
`;

    return report;
}

// ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œ
console.log('===== ãƒ“ã‚¸ãƒã‚¹çŸ¥è­˜çµ±åˆåˆ†æãƒ†ã‚¹ãƒˆ =====\n');
testBusinessKnowledgeAnalysis().catch(error => {
    console.error('åˆ†æå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
    process.exit(1);
});